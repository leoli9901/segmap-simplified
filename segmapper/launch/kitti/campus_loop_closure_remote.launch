<?xml version="1.0" encoding="utf-8"?>

<launch>

  <arg name="respawn_value" default="false" /> <!-- boolean: true, false -->

  <!-- /tf remapper nodes -->
  <node pkg="tf_remapper_cpp" type="tf_remap" name="remapper_0">
    <rosparam param="old_tf_topic_name">na0/tf </rosparam>
  </node>

  <node pkg="tf_remapper_cpp" type="tf_remap" name="remapper_1">
    <rosparam param="old_tf_topic_name">na1/tf </rosparam>
  </node>

  <!-- receiver node (multibotnet) -->
  <include file="$(find multibotnet)/launch/multibotnet.launch">
    <arg name="config_file" value="$(find multibotnet)/config/segmap_recv_12.yaml"/>
    <arg name="print_statistics" value="true"/>
    <arg name="statistics_interval" value="10.0"/>
  </include>

  <!-- Rviz visualization config file path -->
  <arg name="rviz_config_file" value="$(find segmapper)/launch/kitti/kitti_loop_closure_multi.rviz"/>

  <!-- ROS parameters -->
  <rosparam>use_sim_time: false</rosparam>
  <rosparam command="load" file="$(find segmapper)/launch/kitti/campus_loop_closure_remote.yaml"/>

  <!-- rviz node -->
  <node name="visualizer" pkg="rviz" type="rviz" output="screen" respawn="$(arg respawn_value)" args="-d $(arg rviz_config_file)" />

  <!-- segmapper node -->
  <include file="$(find segmapper)/launch/segmapper.launch">
    <arg name="icp_configuration_file" value="$(find segmapper)/launch/kitti/icp_dynamic_outdoor.yaml"/>
    <arg name="icp_input_filters_file" value="$(find segmapper)/launch/kitti/input_filters_outdoor.yaml"/>
  </include>



</launch>
